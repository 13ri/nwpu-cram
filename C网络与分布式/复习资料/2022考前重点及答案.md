待解决的问题：

透明性的机制

DNS

DSP

ADDS

线程的三种类型ULT KLT 混合

REXEC

进程迁移的实现

分布式对象

原子组播
ISIS虚拟同步

参数传递

语义

####   熟悉网络与分布式系统基本概念：

分布式计算系统是由多个相互连接的计算机组成的一个整体，这些计算机在一组系统软件（分布式操作系统或中间件）环境下，合作执行一个共同的或不同的任务，最少依赖于集中的控制过程、数据和硬件。其中，分布式系统可以用硬件、控制和数据三个维度加以检验：分布式计算系统=分布式硬件+分布式控制+分布式数据。

这个定义中表现出的分布式系统的特征：

①系统是由多个计算机或计算机族（集群）组成，这些计算机或集群可以是异构的

②这些计算机在物理上是独立的，在地理上是分散的，计算机运行其自身的操作系统，称为局部操作系统。局部操作系统也可以是异构的，一个作业或程序可以在一个或多个计算机节点运行，每个节点具有自治能力

③各个计算机的地位是平等的。除了受全局分布式操作系统或中间件协同工作以外，不存在或很少有主从控制或某种集中控制环节

④这些计算机组成一个整体，对用户是透明的，尽力呈现出单一系统视图。用户使用任何资源不必知道这些资源的位置，即感觉不到计算机内部的组成结构、边界或网络的存在。 

分布式系统的特征：计算机可以异构也可以同构；分散的地理位置；没有全局时钟；资源为用户所共享；一组由网络互联的、自治的计算机和资源。。。

#### 分布式系统透明性的概念和机制      

机制：？

分布式系统的五个要求：

①开放性：是指（该系统）能否用各种方法进行扩展和重现。分布式系统的开放性主要由下列事实决定，即新的共享资源或服务能否被加入并为各客户程序所利用。基于统一的通信协议和遵循公开的访问共享资源的标准化接口（IDL语言）。

②可扩展性：一个系统在资源数量和用户数量增加时仍能有效工作，这样的系统被认为是可扩展的。表现在规模上、地域上、管理上可扩展。可扩展分布式计算系统存在的挑战有：控制物理资源成本、控制性能损失、防止资源耗尽、避免性能瓶颈

③异构性：允许用户访问运行在异构计算机和网络上的服务，用户程序可以运行在这类异构的结构上。异构表现在在：异构网络、异构计算机硬件、异构操作系统、异构程序设计语言、不同开发商的实现——屏蔽方法：中间件技术和虚拟机技术

④透明性：透明性定义是指向用户和应用程序隐藏了分布式计算系统部件的差异，系统被认为是一个整体而不是独立部件的集合。是系统软件设计的主要考虑因素。分为：**访问透明性**、**位置透明性**、并发、失效、复制、迁移、性能、规模

⑤安全性：基于开放环境下的分布式计算系统应有安全措施，它们的安全至关重要。常采取的安全措施：身份认证技术、消息加密技术、访问控制技术。

分布式系统的应用：科学计算和高性能应用、现代跨企业的电子商务应用、容错应用、固有的分布式应用

分布式操作系统的类型：微内核、集成式、客户机/服务器、中央式、分散式

#### 熟悉中间件技术的类型

中间件的类型：CORBA、COM/DCOM、RMI？、LSF（负载均衡系统）？、DEC/RPC

中间件的定义：中间件是一种软件层，运行在各节点的操作系统之上。为应用提供程序设计的抽象，掩盖底层网络、硬件、操作系统和程序设计语言的差别（异构性）。为应用程序提供了统一的运行环境。

中间件为应用程序提供一系列服务，不同的中间件提供的服务可能是不同的：

①命名服务：允许实体被共享和查询

②作业调度：不仅是处理机时间的分配，还包括处理机的分配和处理机作业的指派。包括进程远程执行和进程迁移。

③资源管理：能够有效管理处理机和存储器资源

④数据的持久性：提供了存储方面的特殊功能保持数据长久存储。一般由分布式文件系统和数据库实现

⑤分布式事务：事务要么成功达到新的一致性；要么失败恢复到事务开始前的一致性。隐藏了事务资源的分散性

⑥分布式文档系统：

⑦安全服务：除了底层本地操作系统提供的对分布式计算安全的支持以外，中间件本身也要实现一定的安全功能

⑧高级通信服务：隐藏了底层的消息传送

![image-20221116192501508](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116192501508.png)



分布式计算的模式：面向对象模式（OOM）——CORBA（公用对象请求代理结构）和DCOM、面向服务模式（OSM）——SOA、公用计算模式（UBM）、志愿者参与模式（VJM）





实体：实体在一个计算机系统中指范围广泛的事物。包括计算机主机、外围设备、进程、数据、文件、数据库、服务、服务器和用户等。在计算机中称呼实体有很多中种办法，比如：名字、地址、标识符

名字：实体的名字是一个用户可读的、便于记忆的字符串

地址、：如果要对实体进行操作，就要访问该实体，实体就需要一个访问点。访问点在分布式系统种是一个特殊实体，它的名字称为地址。（实体访问点的名字）

了解从URL查找Web网页的全过程（画图）

标识符：是系统内部实体的唯一标识，可以提高访问效率

属性：描述实体特征的若干键值对，用<类型-值>表示

绑定与上下文：在一个实体域中所有实体的实体名和地址绑定的集合称为该域名字解析的上下文（Context）

名字服务的形式：

​		①名字服务：根据实体的名字查找它的属性（地址），俗称白页服务。如Internet的域名服务DNS和CORBA的白页服务

​		②目录服务：既可以根据实体的名字查找实体的属性，当不知道实体名时也可以根据实体的一个或多个属性及其值查找		并得到一个匹配这些属性的实体列表。也即基于属性描述查找实体，俗称黄页服务

​		③合约服务：是一种增强的目录服务，通过技术规范来定位一个命名实体，也叫做绿页服务。如Web服务

名字空间：？

名字服务的功能：主要是名字解析

​		①增加名字项和绑定

​		②撤销名字项和绑定

​		③修改名字项和绑定

​		④名字解析

名字图：DAG图（有向无环图）——叶子节点、目录节点、根节点

挂接与挂载（被挂接的一定是一个目录节点，会找挂接点和挂载点）

名字空间划分和多副本：

名字服务器的组成（主要是数据库和名字解析软件）：

![image-20221116195020786](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116195020786.png)

名字服务器的功能：上下文管理、名字查询、和其他服务通信协调

#### 熟悉名字解析中，递归名称解析和迭代名称解析的区别与工作原理，可以给出解析实体名的过程

迭代名称解析（画图）：客户名字解析程序将被访问实体的整个名字传送给根名字服务器，根名字服务器尽力解析实体名，将其解析出的名字服务器的地址和实体名的剩余部分返回给客户端名字解析程序。客户端名字解析程序收到响应后再向由此响应中指明的名字服务器发送实体名中的剩余部分，该名字服务器收到请求后同样会尽力解析这一剩余部分，并将其解析出的下一个名字服务器的地址和实体名中的剩余部分返回给客户端名字解析程序，以此类推。最终实体名会被全部解析，*客户端名字解析程序会得知完整的文件服务器地址，并向其发出请求，文件服务器为客户返回请求的文件。*

![image-20221116195513835](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116195513835.png)

递归名称解析（画图）：与迭代名字解析不同，递归名字解析中，客户名字解析程序将实体的全名传送给根名字服务器。每次名字服务器解析得到的下一个名字服务器地址不是返回给客户而是根据得到的地址直接找寻下一个名字服务器，并将实体名的剩余部分传送给下一个名字服务器进行解析。最后一个名字服务器解析得到的实体服务器最后一节的地址会返回给上一个名字服务器。以此类推，根名字服务器将实体的地址返回给客户。

![image-20221116195531402](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116195531402.png)

比较：   ①递归名字解析要求每台名字服务器都具有较高的性能，除了能进行名字解析和与客户通信以外还要与其他名字服务器通信，并缓存自己和其他名字服务器的解析结果；而迭代名字解析只要求名字服务器可以进行名字解析和与客户通信 

②递归名字解析中，各名字服务器的缓存结果的使用更为有效，因为名字服务器可能已经缓存了某些实体名的解析结果，当用户访问这些已经缓存的名字时可以直接返回发给用户；而迭代名字解析的过程中，客户调用名字解析程序得到的解析结果一般是缓存在客户的地址空间，其他客户无法使用。

③递归解析的长距离通信只存在于根名字服务器之间和根名字服务器与其下一个服务器之间。

域名系统DNS：

![image-20221116201247062](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116201247062.png)

#### 熟悉名字服务的目录服务基本概念

目录服务：既可以根据实体的名字查找实体的属性，当不知道实体名时也可以根据实体的一个或多个属性及其值查找并得到一个匹配这些属性的实体列表。也即基于属性描述查找实体，俗称黄页服务。

目录服务模型：

​		目录信息树DIT：

![image-20221116201505389](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116201505389.png)

用户代理DUA、目录系统代理DSA——目录服务器

目录服务协议：

​		目录访问协议DAP：是DSA和DUA之间的请求/响应协议，包括目录查询和目录修改

​		目录系统协议DSP：？

​		目录信息镜像协议DISP

​		目录操作绑定管理协议DOP

#### LDAP模型的概念与基本原理

概念：轻量目录访问协议（LDAP）是用户用来访问目录服务的一个协议。其最初的目的是提供一个直接运行在TCP/IP上、简化的X.500DAP版本。LDAP最初的目标是向客户提供目录服务时避免DAP的大量开销。DAP协议的重要缺陷是：DAP作为OSI应用层协议要求使用全部OSI协议栈才能下传到TCP/IP层，需要经历多次协议连接建立、撤出、打包、解包；DAP服务是综合的，使用了复杂的属性语法；DAP客户端是庞大的、低效的；DAP是一个同步协议。LDAP操作集对DAP做了简化，删除了read和list操作，用search来代替。

原理：LDAP模型图（画图）中，客户使用LDAP对LDAP服务器发出服务请求。LDAP服务器对目录执行指定的操作活动，然后向客户报告结果。LDAP服务器自行处理目录服务器（DSA）送来的转交，只向客户返回正确的查询结果或错误消息，不再返回转交。LDAP模型的实现有两种方法：①LDAP服务器是一个独立的实体，用目录服务器提供的接口请求目录服务器执行查询操作 ②LDAP服务器就是目录服务器的一个组成部分

![image-20221116202005947](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116202005947.png)

（其实就是多了一个LDAP服务器）

分布式进程概念：进程是操作系统中独立存在的实体，它可以拥有自己独立的资源，没有经过进程本身允许的情况下，其他进程不能访问这些资源（对比线程）

进程地址空间三个部分：文本区域、数据堆区域、堆栈区域

![image-20221116202932580](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116202932580.png)

进程与程序的区别：程序是一个静态的指令集合，而进程是一个正在系统中活动的指令集合（即执行中的程序），若干个进程可以在单处理机状态上并发执行

进程状态：创建、就绪、运行、等待、终止

线程：是包含在进程中的一种实体，有自己的运行线索，可以完成一定的任务，可与其他线程共享进程中的共享变量以及部分环境，相互之间协同来完成进程所要完成的任务。线程比进程有更高的性能，同一个进程中的线程都有共性；多个线程将共享同一个进程虚拟空间。

#### 熟悉进程迁移的原理与基本概念

概念：进程迁移是将一个正在运行的进程挂起，将它的状态从源处理机节点转移到目标处理机节点，并在目标处理机上恢复该进程运行。*相对于静态放置（如进程远程执行），进程迁移具有灵活且应用广泛的优点，例如支持动态负载平衡、系统容错、高效使用本地资源等诸多系统功能。但缺点是运行开销相对比较大。*

原理（概念模型）：进程迁移被分为两部分的工作，一是在源处理机采集迁移进程的进程状态并转移到目的处理机，并用这些进程状态在目的处理机重建迁移进程，使之从断点处继续运行；二是通知与迁移进程有通信关系的其他进程，重建它们与迁移进程正确的通信连接。

![image-20221116203733987](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116203733987.png)

进程迁移步骤（机制）：

​		①迁移协商

​		②创建恢复进程

​		③中断被迁进程的运行

​		④在源处理机上收集被迁进程状态

​		⑤传输被迁进程的状态（到目的处理机）

​		⑥恢复被迁进程状态

​		⑦通知被迁进程的新位置

​		⑧被迁进程恢复运行

​		⑨操作转发，利用转发机制保证进程可以在远程处理机透明执行

进程迁移可以支持：动态系统管理与维护、动态负载平衡、系统容错、主人优先使用原则

进程迁移策略：动态负载平衡——使系统中重负载处理机转移一部分负载到轻负载处理机上运行，使得整个集群系统中的所有处理机的负载趋向平衡，从而提高系统的整体运行效率。

负载系统的构成

​		①负载信息管理模块：负载信息的衡量和信息收集策略

​		②负载平衡模块：负载平衡策略（传输策略、选择策略、定位策略）、激发方式（中央服务器触发方式、发送者触发方式、服务者触发方式、对称触发方式、自适应触发方式）



分布式系统通信：是由一个通信层实现的，它建立在节点操作系统和网络传输层协议之上，提供一组通信原语供应用程序调用。通信层介乎应用程序和操作系统程序之间，实现各种通信协议，实际上是一种中间件。

![image-20221116205024182](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116205024182.png)

消息传送的几种模式：

​		①同步消息传送：当进程P执行同步发送原语send，将消息从S发送给进程Q时，它必须等待，直到进程Q执行一条对应的同步接收原语receive，将消息从进程P接收到R。进程Q执行接收原语后也必须等待进程P发送消息。

​		②阻塞发送/接收：当进程到达发送原语时执行一次阻塞发送，无需等待对应的接收。在消息从S安全写入发送缓冲区前，发送进程不能返回。当进程到达接收原语时执行一次阻塞接收，无需等待对应的发送。然而，消息从缓冲区接收到R之前，接收进程不会返回。系统要为阻塞模式消息传送提供临时的缓冲区。

​		③非阻塞发送/接收：当进程到达发送原语时执行一次非阻塞发送，无需等待对应的接收。只要通知操作系统有一个消息要发送，发送进程就可以返回。当进程到达接收原语时执行一次非阻塞接收，无须等待对应的发送。只要通知操作系统有一个消息要接收，接收进程就可以返回了。系统要为非阻塞消息传送提供临时的缓冲区。

![image-20221116205037928](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116205037928.png)

可靠性语义：

![image-20221116205215212](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116205215212.png)

#### 可靠多播通信中，解决反馈拥塞的方法

一种办法是接收进程不对消息“成功接收”进行反馈，只对“消息丢失”进行反馈。减少了反馈的规模。

①不分层反馈抑制：当一个接收进程检测出组播消息丢失时，它向进程组的所有成员组播一个“消息丢失”消息，包括发送进程。其它丢失组播消息的接收进程接到这个“消息丢失”消息后就不再发“消息丢失”消息——这种情况称为“反馈抑制”。发送进程只要收到一个“消息丢失”反馈，稍后它就会重发丢失了的组播消息。

②分层反馈抑制：接收进程分成许多小组，并按照树形方式进行组织。树的根是发送进程所在的小组。每个进程小组可以对应一个局域网，利用它的组播特性。每个小组指定一个协调者，负责处理本进程小组接收进程的重发请求。本地协调者有自己的历史缓冲区。如果协调者自己丢失了多播消息m，它就请求其父亲小组的协调者重发多播消息m；反之，接收到消息m的本地协调者向其父协调者发送一个确认消息。当协调者接收到其子协调者和本小组其他接收进程的确认消息后，它就可以将多播消息m从它的历史缓冲区中删除。

![image-20221116205756891](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116205756891.png)



原子组播：没看懂图4.7和4.8

#### RPC概念与基本工作原理

概念：RPC（远程过程调用）即允许一台机器上的程序调用其他机器上（过程）的过程。例如当A机上的进程调用B机上的过程时，A机上的调用进程被挂起，开始执行B机上的过程。调用方将调用参数通过消息传送给被调方，被调方将执行结果通过消息返回给调用方。这种方式对消息进行了包装，客户看不到这些消息的传送过程，这种方法称为远程过程调用。*——通信的隐藏对分布式系统访问透明性的实现是十分重要的*

其思想是尽量使远程过程调用具有与本地过程调用相同的形式。分布式系统希望RPC是透明的，即客户不应该知道被调用的过程是在另一台机器上执行，反之亦然。只不过调用时是从例程的另一个版本——客户桩中获取。服务器端服务器也为远程客户提供了一个例程——服务器桩。实际上，客户桩是服务器在客户机上的代理；服务器桩是客户在服务器机上的代理。

原理（要理解并会描述画图）：

对于客户，**客户**执行一个远程调用时会调用**客户桩**。客户桩的**编码模块**从**堆栈中**将**调用参数**读出到一个**缓冲区**，形成调用参数**适用于网络上传输的扁平形式**。然后将它打包（Pack）成“请求消息”，通过**发送原语send**，由**操作系统和网络接口**传送“请求消息”。然后发送端执行接收原语receive后被**阻塞**，等待“应答消息”到来。

对于**服务器**，**服务器桩**先执行**接收原语receive**后被**阻塞**，等待客户请求。“请求消息”到达服务器端由**操作系统根据接收原语指定的端口**，将它送到**服务器桩**。服务器桩**解包**（Unpack）“请求消息”，**解码调用参数，恢复成堆栈形式**，然后调用服务器的A例程，服务进程从堆栈读取调用参数，实现对服务的调用。服务器执行完A例程之后，**准备将结果返回给客户**，将调用服务器桩把结果**编码成适于网络上传输的扁平格式**。然后**Pack**成“应答消息”，通过发送原语**send**由**操作系统和网络接口**传送“应答消息”。“应答消息”到达客户端，由操作系统根据**接收原语指定的端口**，将它送到**客户桩**。客户桩**Unpack**“应答消息”，**解码调用结果**，**并将结果返回给用户**

![image-20221116210502607](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116210502607.png)

DEC：分布式计算环境。是现有网络操作系统和分布式应用程序之间的中间件软件层次

DEC/RPC：是RPC的一个典型代表

接口定义语言IDL：->IDL编译器负责产生某种高级语言的接口头文件、客户桩文件和服务器桩文件

![image-20221116212119990](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116212119990.png)

#### RMI的基本概念和工作原理，RMI与RPC的关系与区别（结合后面）

语义？

远程方法调用RMI（常用的是CORBA和Java/RMI），将用户绑定到对象之后，就可以通过代理来调用对象的方法。其中分为静态和动态两类。 

静态（画图）：分别在用户端和服务器端生成代理Proxy和骨架Skeleton，分别对应客户桩和服务器桩。由接口定义语言生成客户端的代理和服务器端骨架。客户端代理由用户应用进程调用，对调用结果解码，将结果返回给客户进程；服务器端骨架接收和解包请求消息，解码调用参数，调用对象方法。对象返回调用结果给骨架，骨架对调用结果进行编码，并打包成应答消息，将应答消息传送给客户端代理。

动态：

关系与区别：？



时间测量：①太阳秒②国际原子时钟TAI③全球协调时钟UTC

时钟同步算法：Cristian算法和Berkeley算法

时钟同步的意义：

![image-20221116212555756](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116212555756.png)

网络时间协议NTP

Lamport时间戳：定义了一个关系称作“先发生”。+ 规则 + 只能表明事件之间的时序关系，无法表述其因果关系。

Lamport逻辑时钟：

![image-20221116212649475](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116212649475.png)

![image-20221116212657729](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116212657729.png)

![image-20221116212706312](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116212706312.png)

![image-20221116212718501](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116212718501.png)

#### 向量时间戳的概念与原理，及其表示事件的方法

向量时间戳是通过让每个进程维护一个向量V来实现的。其中V有以下三个性质：

​		①向量时钟是一个数组，其元素的个数是系统的进程数，元素是升序的整数。元素在数组中是按进程号排序。系统的每个进程维持一个向量时钟。（维持某个进程和其他进程的关系）

​		②Vi[ i ]是到目前为止进程Pi发生的事件数量，它是在进程Pi中新事件发生时递增Vi[ i ]来维护的

​		③如果Vi[ j ] = k， 进程Pi便知道进程Pj中已经发生了k个事件。这是通过所发送消息携带向量来维护的。例如进程Pi发送消息时，将它当前的向量时钟作为时间戳与消息一同发送

![image-20221116213204043](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116213204043.png)

选举算法：选择一个进程来当协调者的算法称为选举算法。一个进程不会多次调用选举，但系统中N个进程可以调用N个并发的选举，然而最终胜者是唯一的。（环算法和欺负算法）

环算法：

环算法的目的是选举一个进程作为协调者，这个进程具有最高的编号。

过程（原理）：

​		①初始，每个进程标记为选举未参与者。

​		②选举发起者将自己标记为选举参与者，将自己的标识符置于选举消息中，并顺时针传送给下一个邻居（进程）。

​		③当进程收到一个选举消息，它将选举消息中的标识符与它自己的标识符进行比较，如果消息中的标识符大，进程转发这个选举消息到它的下一个邻居，并将自己标记为选举参与者；如果消息中的标识符小且接收进程不是选举参与者，接收进程用它的标识符替换消息中的标识符，并将选举消息转发到下一个邻居,自己也成了选举参与者；如果接收进程已经是选举参与者，它只转发选举消息。

​		④直到接收进程的标识符与选举消息中携带的进程标识符相等为止。标识符中标识符最高者便是新的协调者。

![image-20221116214054465](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116214054465.png)

最坏的情况是最高编号的进程是启动选举进程的逆时针邻居。

#### 掌握欺负算法基本原理、概念与工作流程，熟悉选举触发的条件、选举条件和触发场景

欺负算法（Bully算法）（画图）：这个算法允许进程在选举过程中失效，通过超时机制来检测进程失效。启动选举的进程只与编号高于它的进程通信。涉及了三种消息——选举消息E、应答消息OK和协调者消息C。当一个进程P发现协调者不再响应请求时，它就启动一次选举。进程P按照如下的过程主持一次选举：

​		①进程P向所有编号比它高的进程发送一个选举消息E

​		②如果没有响应进程，那么P就是老大，获胜成为新的协调者

​		③如果有进程响应，即有进程的编号比P大，响应进程接过选举主持工作，进程P的任务结束

任何时候，一个进程只能从编号比他小的进程里接收到选举消息E。它接收到选举消息后发回一个应答消息OK，然后接替主持选举，发出新的选举消息E。最后除了一个编号最大的进程外，其他进程都放弃选举的主持工作，这个编号最大的进程便成为新的协调者。凡是编号最大的进程，它总是会当选协调者，所以称作欺负算法。

另外，算法中还需要一个可靠的失效检测器。假定Ttran是最大的消息传输延时，Tprocess是处理消息的最大延时。如果在T = 2Ttran + Tprocess（来回两个Ttran和处理时间一个Tprocess）时间内没有应答消息到达，本地失效检测器认为接收选举消息的进程已经失效，如果在T时间内没有收到任何消息OK，那么该进程便认为自己成为了新的协调者，并发出协调者消息C，通知进程组内所有幸存进程

![image-20221116214531768](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116214531768.png)



互斥算法：是为了解决多个进程要访问一个共享资源时发生冲突而设计的算法。

互斥算法分类：集中式、分布式（基于时间戳）、令牌环、基于事件优先权、共享K个相同资源的

​		①集中式：选一个进程作为协调者。

![image-20221116215340218](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116215340218.png)



#### 掌握分布式互斥算法中，Ricart和Agarawala算法的原理与临界区死锁问题

基于Lamport时间戳，只要2(N-1)个消息，其中N是竞争资源的进程数目。

此算法最重要的特点是其对称性、完全的分布式控制和对通信链路相对速度的不敏感性

原理：

​		①进程Pi发送资源请求消息Request（Ti ：Pi）到其他竞争该资源的进程，并将消息至于他自己的请求队列中。Ti是它的时间戳

​		②当进程Pj接收到资源请求消息Request（Ti ：Pi），按时间戳顺序将消息置于它的消息队列中，并做W1：如果没有资源请求或请求的有效顺序晚于收到的请求消息的优先顺序，便向发请求消息的进程回送一个应答消息Reply（Tj ：Pj），否则就推迟返回应答消息	W2：进程从临界区退出，向有关请求资源的进程补发一个应答消息

​		③请求进程从其他所有竞争进程得到应答消息Reply（Tj ：Pj），便可进入临界区

临界区死锁问题：？

#### 理解一致性模型中，以数据为中心和以用户为中心的模型原理与区别

一致性模型是数据存储和访问数据存储的进程之间的一种契约

以数据为中心的一致性，就是多个进程并发访问同一个共享数据存储时，保持共享数据存储的一致性。（从强到弱：严格一致性、顺序一致性、因果一致性、FIFO一致性、弱一致性、释放一致性、入口一致性）

以客户为中心的一致性，其是为了解决一个客户访问数据存储的不同副本时，如何保持数据存储副本间的一致性（几个方法：单调读、单调写、写后读、读后写）

单调读：一个进程读数据项x的值，该进程的任何后续对x的读操作总是返回前一次读同样的值或更加新的值。

单调写：

#### 掌握法定多数表决的复制写协议工作原理，可以给出正确的读、写集团                                                                   

复制写协议：写操作同时在多个副本上进行。其包括主动多副本协议和基于法定数量的协议。前者在所有副本上进行，后者在一个法定数量（多数服务器也即超过一半数量的服务器）的副本上进行。

基于法定数量的协议：一种基于法定多数表决的复制写协议是由Thomas提出的。其基本思想是要求客户在读或写一个多副本共享数据项之前，向多个副本服务器提出请求并得到它们的同意。   

具体原理：一个分布式文件系统被复制在N个服务器上。要更新一个文件，客户至少必须取得N/2+1个服务器（多数服务器）的同意。一旦它们同意更新，该文件将被修改，并用一个新的版本号相关联。在读一个多副本文件时，客户也必须至少联系N/2+1个服务器，请求它们返回该文件的版本号。如果返回的所有版本号一致，该版本必定是最新的版本，因为此时剩余的服务器数量不足总数的一半，不可能执行写操作。

Gifford的改进：一个客户要读取一个具有N个副本的文件，他必须将Nr个服务器组成一个“读集团”；要修改一个文件，必须将Nw个服务器组成一个“写集团”。其中，

​		①Nr + Nw  > N  用于防止读-写冲突

​		②Nw > N/2 用于防止写-写冲突

只有在适当个数的服务器同意参与文件的读写操作后，客户才能执行对文件的读或写 

具体如何给出正确的读、写集团参照课本P215图8.21

![image-20221115143303396](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115143303396.png)

#### NFS体系结构与概念，清楚解决高效缓存一致性的原理与方法

网络文件系统NFS（使用RPC）

体系结构：图9.3 会画

NFS底层模型是远程文件访问模型，它为客户对远程服务器所管理的文件系统提供透明服务

高速缓存一致性的原理与方法：（以下三个方面的原理 ）

高速缓存一致性的检测策略：

①静态方法：此方法假定编译器在客户软件运行之前执行必要的分析，确定哪些数据可能因为被缓存而导致不一致性。编译器所做的仅仅是输入一些避免不一致的指令。

②动态方法：此方法是在运行时检测不一致性，是分布式系统常用的方法。

高速缓存一致性的实施策略——为保持高速缓存与服务器各副本保持一致——两种方法：

①第一种方法是当服务器一个数据项被修改后，服务器向所有高速缓存发送一个无效消息，通知高速缓存该数据项已经过时

②第二种方法是直接传播数据更新。

最后，还要考虑用户进程修改高速缓存更新数据时如何使服务器及时更新

①直写式高速缓存：是允许客户在修改被缓存数据时，将更新数据发给副本服务器。

②另外还有回写式高速缓存

![image-20221115143336768](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115143336768.png)

![image-20221115143404814](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115143404814.png)

![image-20221115143710605](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115143710605.png)

![image-20221115143752905](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115143752905.png)





COM/DCOM：是微软推出的组件对象模型，它提供了一种解决应用复杂性和功能进化问题的方法

#### CORBA（远程对象方法调用的一种）的体系结构与概念，掌握接口的类型与作用

分布式对象是一些独立代码的封装体（对象、组件），它向外提供了一个包括一组属性和方法的接口，远程客户程序通过远程方法调用来访问它。

概念：公共对象请求代理结构（CORBA），是OMG为解决分布式计算环境制定的一组协议标准。目的是允许分布式对象在异构环境下互操作，对象可以用不同的编程语言实现，部署在不同的平台上，屏蔽通信和实现细节的需求，继承已有系统，消除“孤岛”现象。是OMA的一部分，作为规范分布式对象间互操作的标准。

OMA参考模型：

![image-20221115145933819](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115145933819.png)



CORBA的核心是对象请求代理ORB，在面向对象的环境中，CORBA对象的请求者不必知道其所请求的对象在哪里，是如何实现的，而是由ORB来负责跨平台的运作管理，无需系统的开发者干预。因此具有跨平台、分布式、面向对象等优点。

CORBA是一个中间件规范并不是一个实体软件。软件开发者通过使用第三方的ORB工具或IDL语言来定义CORBA对象，实现ORB（对象请求代理）功能

为了保持CORBA的商业中立性和语言中立性，必须有一个中介，存在于像C++CORBA服务代码和Java CORBA客户机这样的实体之间，这就是IDL（接口定义语言）

![image-20221115150030167](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115150030167.png)

![image-20221116221240411](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116221240411.png)

接口：动态调用接口DII、动态骨架接口DSI、可移植对象适配器POA、ORB互操作协议IIOP

学会IDL映射到Java

![image-20221116221418881](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116221418881.png)

![image-20221116221536498](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116221536498.png)

![image-20221116221633519](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221116221633519.png)

IDL没有重载

IDL属性关键字：attribute（会对应两个方法一个创建一个赋值）和readonly、

代码实现



Web的标准栈——扩展标记语言XML、简单对象访问协议SOAP、Web服务描述语言WSDL、通用描述发现与集成UDDI

Web服务契约：

![image-20221117145133367](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145133367.png)

![image-20221117145201515](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145201515.png)

![image-20221117145208899](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145208899.png)

![image-20221117145216417](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145216417.png)

WebService：主要目的是跨平台的可互操作性

①是由企业发布的完成其特定商务需求的在线应用服务

②是一种新的Web应用程序分支，是自包含、自描述、模块化的应用

③是一个应用组件，它逻辑性地为其他应用程序提供数据与服务



#### WebService中WSDL的概念，XML基本原理与概念

WSDL：Web服务描述语言。WSDL文档用于描述和定位一个Web服务（即描述某个Web Service）。是基于XML的。

XML：扩展标记语言的设计宗旨是传输和存储数据，方便实现不同平台和不同应用程序设计语言之间交换数据，其关注点是数据的内容。XML是“不作为”的，除了存储和传输信息外不会做其他任何事情。可以被用来创建新的Internet语言，如WSDL。

![image-20221115150449049](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115150449049.png)

![image-20221115150501112](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115150501112.png)

![image-20221115150512442](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221115150512442.png)

  

#### WebService中UDDI的基本概念，理解商业注册中心类型

概念：通用描述、发现和集成协议UDDI是Web服务提供者和消费者（请求者）之间的接洽点。对Web服务提供者来讲，UDDI是一个注册的服务器，通过它向Internet上的用户发布它的Web服务。对Web服务请求者来讲，UDDI是一个目录服务器，通过它请求者可以发现和找到其需要的Web服务。

![image-20221117145803494](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145803494.png)

![image-20221117145837919](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145837919.png)

#### SOAP的基本概念和工作原理，掌握SOAP XML Schema基本代码的编写规范

概念：简单对象访问协议SOAP是基于XML的一种通信协议，与平台和引用的编程语言无关。SOAP是由HTTP承载的。

会写SOAP请求和响应代码

![image-20221117145302647](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145302647.png)

![image-20221117145313669](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145313669.png)

#### 云计算的概念和其关键技术和服务，SaaS、PaaS、laaS

![image-20221117145907968](C:\Users\YiFei-Chu\Desktop\作业\大三上作业\网络与分布式\复习资料\assets\image-20221117145907968.png)

#### 能够根据给定的需求设计一个分布式系统，并阐述所涉及到的相关技术



